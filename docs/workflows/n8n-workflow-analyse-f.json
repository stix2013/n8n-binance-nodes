{
  "name": "Binance Future Analysis",
  "nodes": [
    {
      "parameters": {
        "chatId": "=5572228344",
        "text": "=ðŸ” Analysing {{ $json.symbol }}...\n\nTimeframes: {{ $json.intervals.join(', ') }}\nProcessing market data and indicators. Please wait.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        64,
        -448
      ],
      "id": "ad29e1be-b0dc-4ee0-a0b2-b0b7b02f26f2",
      "name": "Notify Analysis Start",
      "webhookId": "0c768786-24a4-4aa5-81f3-8d8213ea7895",
      "credentials": {
        "telegramApi": {
          "id": "O5JL1UG87JJ1GySx",
          "name": "stix_crypto_freak_bot"
        }
      },
      "onError": "continueRegularOutput",
      "notes": "Error when"
    },
    {
      "parameters": {
        "conversionOptions": {
          "format": "auto"
        },
        "characterFiltering": {},
        "outputOptions": {
          "outputMode": "binary"
        }
      },
      "type": "CUSTOM.markdownSaver",
      "typeVersion": 1,
      "position": [
        2128,
        192
      ],
      "id": "e2a9902c-eb97-49c0-bd3d-1c5893e036ce",
      "name": "Markdown Binary"
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "=/home/node/analyse/AI-{{ $('Grouping').item.json.symbol }}-{{ $now.format('yyyyMMddHHmm') }}.md",
        "dataPropertyName": "=data",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1.1,
      "position": [
        2352,
        288
      ],
      "id": "57dd4fb1-f0a6-40de-88c5-060a69b26923",
      "name": "Write to docs/analyse",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "availableInChat": true,
        "agentName": "Crypto Analyse",
        "agentDescription": "This is day trader expert for crypto",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.4,
      "position": [
        -384,
        -64
      ],
      "id": "0721980d-4bf6-4006-af91-fbb093605833",
      "name": "When chat message received",
      "webhookId": "5d8f37da-b2bf-4901-b817-8ca02788f59f"
    },
    {
      "parameters": {
        "jsCode": "const raw = ($input.first().json.chatInput || $input.first().json.message?.text || '').trim();\nif (!raw) throw new Error('No coin symbol provided. Send a symbol like BTC, ETH, or SOL.');\n\n// Strip common suffixes if user already typed full pair\nconst coin = raw.toUpperCase().replace(/USDT$/, '').replace(/[^A-Z0-9]/g, '');\nif (!coin) throw new Error('Invalid symbol. Send a coin like BTC, ETH, or SOL.');\n\nconst symbol = coin + 'USDT';\nconst chatId = $input.first().json.message?.chat?.id || '5572228344';\nconst limit = 500;\n\nconst intervals = [\n  '15m', // for 15 minutes timeframe\n  '1h', // for 1 hour timeframe\n  '4h', // for 4 hours timeframe\n  '1m', // for 1 minute timeframe\n];\n\nreturn [{\n    chatId,\n    coin,\n    symbol,\n    limit,\n    intervals,\n  }];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -160,
        -208
      ],
      "id": "a7026d7d-d328-4274-842b-222d40558467",
      "name": "Translate to Symbol"
    },
    {
      "parameters": {
        "numberInputs": 4
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        512,
        -112
      ],
      "id": "c022d3e3-40cc-4df7-826e-3e21ffe5443e",
      "name": "Merge Indicators"
    },
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        -384,
        -256
      ],
      "id": "7e816fc9-71ad-44ab-9aa1-b8cbeca97a8f",
      "name": "My Telegram Channel",
      "webhookId": "1474d42e-9084-48ef-ac45-a4b21168d942",
      "executeOnce": false,
      "credentials": {
        "telegramApi": {
          "id": "O5JL1UG87JJ1GySx",
          "name": "stix_crypto_freak_bot"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "kimi-k2.5",
          "mode": "list",
          "cachedResultName": "kimi-k2.5"
        },
        "messages": {
          "values": [
            {
              "content": "=## INPUT DATA\n**Symbol:** {{ $json.symbol }}\n\n---\n\n### Timeframe 1 ({{ $json.indicators[0].interval }}) - [Short-term/Entry Timing]\n** RSI:**\n- Value: {{ $json.indicators[0].rsi.value }}\n- Signal: {{ $json.indicators[0].rsi.signal }}\n\n** MACD:**\n- Line: {{ $json.indicators[0].macd.macd_line }}\n- Signal Line: {{ $json.indicators[0].macd.signal_line }}\n- Histogram: {{ $json.indicators[0].macd.histogram }}\n- Signal Type: {{ $json.indicators[0].macd.signal_type }}\n- Crossover: {{ $json.indicators[0].macd.crossover }}\n\n** EMA:**\n- EMA 09: {{ $json.indicators[0].ema.ema_9 }}\n- EMA 21: {{ $json.indicators[0].ema.ema_21 }}\n- Signal: {{ $json.indicators[0].ema.signal }}\n\n---\n\n### Timeframe 2 ({{ $json.indicators[1].interval }}) - [Medium-term/Trend Direction]\n** RSI:**\n- Value: {{ $json.indicators[1].rsi.value }}\n- Signal: {{ $json.indicators[1].rsi.signal }}\n\n** MACD:**\n- Line: {{ $json.indicators[1].macd.macd_line }}\n- Signal Line: {{ $json.indicators[1].macd.signal_line }}\n- Histogram: {{ $json.indicators[1].macd.histogram }}\n- Signal Type: {{ $json.indicators[1].macd.signal_type }}\n- Crossover: {{ $json.indicators[1].macd.crossover }}\n\n** EMA:**\n- EMA 12: {{ $json.indicators[1].ema.ema_12 }}\n- EMA 26: {{ $json.indicators[1].ema.ema_26 }}\n- Signal: {{ $json.indicators[1].ema.signal }}\n\n---\n\n### Timeframe 3 ({{ $json.indicators[2].interval }}) - [Long-term/Market Bias]\n** RSI:**\n- Value: {{ $json.indicators[2].rsi.value }}\n- Signal: {{ $json.indicators[2].rsi.signal }}\n\n** MACD:**\n- Line: {{ $json.indicators[2].macd.macd_line }}\n- Signal Line: {{ $json.indicators[2].macd.signal_line }}\n- Histogram: {{ $json.indicators[2].macd.histogram }}\n- Signal Type: {{ $json.indicators[2].macd.signal_type }}\n- Crossover: {{ $json.indicators[2].macd.crossover }}\n\n** EMA:**\n- EMA 20: {{ $json.indicators[2].ema.ema_20 }}\n- EMA 50: {{ $json.indicators[2].ema.ema_50 }}\n- Signal: {{ $json.indicators[2].ema.signal }}\n\n---\n\n### Timeframe 4 ({{ $json.indicators[3].interval }}) - [Long-term/Market Bias]\n** RSI:**\n- Value: {{ $json.indicators[3].rsi.value }}\n- Signal: {{ $json.indicators[3].rsi.signal }}\n\n** MACD:**\n- Line: {{ $json.indicators[3].macd.macd_line }}\n- Signal Line: {{ $json.indicators[3].macd.signal_line }}\n- Histogram: {{ $json.indicators[3].macd.histogram }}\n- Signal Type: {{ $json.indicators[3].macd.signal_type }}\n- Crossover: {{ $json.indicators[3].macd.crossover }}\n\n** EMA:**\n- EMA 50: {{ $json.indicators[3].ema.ema_50 }}\n- EMA 200: {{ $json.indicators[3].ema.ema_200 }}\n- Signal: {{ $json.indicators[3].ema.signal }}\n\n---\n\n### 5. OUTPUT FORMAT\n\nProvide your analysis in this structure:\n\nAnalyse for {{ $json.symbol }} at {{ $now.format('yyyy-MM-dd HH:mm')}}\n"
            }
          ]
        },
        "options": {
          "system": "=You are an expert cryptocurrency day trader with deep expertise in technical analysis, risk management, and multi-timeframe strategy using RSI, MACD and EMA indicators. Analyze the following data for {{ $json.symbol }} and provide actionable trading insights. There are tools available:\n\n- Tool to get the history chat from another model with `session_id` begin {{ $json.symbol }} and dash `-` and inserted time with format `yyyyMMddHHmm`.\n\n---\n\n**THE OUTPUT**\n\nAnalyze {{ $json.symbol }} using RSI, MACD, and EMA indicators. Output only:\n\n- Action: WAIT / LONG / SHORT / CLOSE POSITION\n- Entry Zone: [price range or \"Wait for trigger\"]\n- Stop Loss: [price or %]\n- Target 1: [price]\n- Target 2: [price]\n\n---\n\n**Rules**\n\n- 2+ confirming factors before entry\n- **WAIT** if signals conflict\n- **Prioritize mean reversion** if RSI >75 or <25\n",
          "temperature": 0.1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.ollama",
      "typeVersion": 1,
      "position": [
        1600,
        288
      ],
      "id": "4d16c57a-e0b9-445c-8cbd-69c435fa17f6",
      "name": "Message a model",
      "credentials": {
        "ollamaApi": {
          "id": "URvt83r3fqd9q5Z7",
          "name": "Ollama account"
        }
      }
    },
    {
      "parameters": {
        "operation": "sendDocument",
        "chatId": "5572228344",
        "binaryData": true,
        "additionalFields": {
          "fileName": "={{ $('Translate to Symbol').item.json.symbol }}-analyse.md"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2352,
        96
      ],
      "id": "4fd04aed-20ea-4165-a60f-527993e68fda",
      "name": "Send a document",
      "webhookId": "68cabebe-d0d8-41b1-8719-f51a48bbd02b",
      "alwaysOutputData": false,
      "credentials": {
        "telegramApi": {
          "id": "O5JL1UG87JJ1GySx",
          "name": "stix_crypto_freak_bot"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "toolDescription": "Fetch candlestick/kline data from Binance Spot or USD-M Futures API, example for BTCUSDT, ETHUSDT, SOLUSDT etc.\n\n---\n\n** Example Input: \n- symbol: ETHUSDT\n- limit: 100\n",
        "apiSource": "direct",
        "marketType": "futures",
        "symbol": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Symbol', ``, 'string') }}",
        "interval": "1m",
        "limit": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Limit', ``, 'number') }}"
      },
      "type": "CUSTOM.binanceKlineTool",
      "typeVersion": 1,
      "position": [
        1664,
        16
      ],
      "id": "a618636b-3e5b-45b9-9406-9c781dc419f4",
      "name": "Klines Tool",
      "credentials": {
        "binanceApi": {
          "id": "tmVGRcPSpJIYsaeS",
          "name": "Binance account"
        }
      }
    },
    {
      "parameters": {
        "toolDescription": "Fetch current price of a cryto symbol (example: BTCUSDT, ETHUSDT, etc.). \n\n---\n\n** Example Input: \n- symbol: ETHUSDT\n\n---\n\n** Example Output with input ETHUSDT:\n\n [\n  {\n    \"symbol\": \"ETHUSDT\",\n    \"marketType\": \"futures\",\n    \"dataType\": \"markPriceKline\",\n    \"interval\": \"1m\",\n    \"limit\": 1,\n    \"currentPrice\": \"1980.80000000\",\n    \"klineCount\": 1,\n    \"klines\": [\n      {\n        \"openTime\": 1771413360000,\n        \"open\": \"1981.56000000\",\n        \"high\": \"1981.95000000\",\n        \"low\": \"1980.44558140\",\n        \"close\": \"1980.80000000\",\n        \"volume\": \"0\",\n        \"closeTime\": 1771413419999,\n        \"quoteVolume\": \"0\",\n        \"trades\": 32,\n        \"takerBuyBaseVolume\": \"0\",\n        \"takerBuyQuoteVolume\": \"0\"\n      }\n    ],\n    \"fetchedAt\": \"2026-02-18T11:16:41.224Z\"\n  }\n]\n\nAnd the current price is 1980.80000000",
        "apiSource": "direct",
        "marketType": "futures",
        "symbol": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Symbol', ``, 'string') }}",
        "interval": "1m",
        "limit": 1
      },
      "type": "CUSTOM.binanceKlineTool",
      "typeVersion": 1,
      "position": [
        1792,
        16
      ],
      "id": "fda781e8-3020-4071-9100-8100374efd22",
      "name": "Current Price",
      "credentials": {
        "binanceApi": {
          "id": "tmVGRcPSpJIYsaeS",
          "name": "Binance account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const order = ['1m','15m', '1h', '4h'];\nconst items = $input.all();\nitems.sort((a, b) => order.indexOf(a.json.interval) - order.indexOf(b.json.interval));\nreturn items;"
      },
      "id": "dcf56e24-f8f5-40f1-8444-aabe1a15a616",
      "name": "Sort by Interval",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        736,
        -80
      ]
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "destinationFieldName": "indicators",
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        960,
        -80
      ],
      "id": "5a465049-c765-4012-b597-3a043aa23d47",
      "name": "Aggregate"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=## INPUT DATA\n**Symbol:** {{ $json.symbol }}\n\n---\n\n### Timeframe 1 ({{ $json.indicators[0].interval }}) - [Short-term/Entry Timing]\n** RSI:**\n- Value: {{ $json.indicators[0].rsi.value }}\n- Signal: {{ $json.indicators[0].rsi.signal }}\n\n** MACD:**\n- Line: {{ $json.indicators[0].macd.macd_line }}\n- Signal Line: {{ $json.indicators[0].macd.signal_line }}\n- Histogram: {{ $json.indicators[0].macd.histogram }}\n- Signal Type: {{ $json.indicators[0].macd.signal_type }}\n- Crossover: {{ $json.indicators[0].macd.crossover }}\n\n** EMA:**\n- EMA 09: {{ $json.indicators[0].ema.ema_9 }}\n- EMA 21: {{ $json.indicators[0].ema.ema_21 }}\n- Signal: {{ $json.indicators[0].ema.signal }}\n\n---\n\n### Timeframe 2 ({{ $json.indicators[1].interval }}) - [Medium-term/Trend Direction]\n** RSI:**\n- Value: {{ $json.indicators[1].rsi.value }}\n- Signal: {{ $json.indicators[1].rsi.signal }}\n\n** MACD:**\n- Line: {{ $json.indicators[1].macd.macd_line }}\n- Signal Line: {{ $json.indicators[1].macd.signal_line }}\n- Histogram: {{ $json.indicators[1].macd.histogram }}\n- Signal Type: {{ $json.indicators[1].macd.signal_type }}\n- Crossover: {{ $json.indicators[1].macd.crossover }}\n\n** EMA:**\n- EMA 12: {{ $json.indicators[1].ema.ema_12 }}\n- EMA 26: {{ $json.indicators[1].ema.ema_26 }}\n- Signal: {{ $json.indicators[1].ema.signal }}\n\n---\n\n### Timeframe 3 ({{ $json.indicators[2].interval }}) - [Long-term/Market Bias]\n** RSI:**\n- Value: {{ $json.indicators[2].rsi.value }}\n- Signal: {{ $json.indicators[2].rsi.signal }}\n\n** MACD:**\n- Line: {{ $json.indicators[2].macd.macd_line }}\n- Signal Line: {{ $json.indicators[2].macd.signal_line }}\n- Histogram: {{ $json.indicators[2].macd.histogram }}\n- Signal Type: {{ $json.indicators[2].macd.signal_type }}\n- Crossover: {{ $json.indicators[2].macd.crossover }}\n\n** EMA:**\n- EMA 20: {{ $json.indicators[2].ema.ema_20 }}\n- EMA 50: {{ $json.indicators[2].ema.ema_50 }}\n- Signal: {{ $json.indicators[2].ema.signal }}\n\n---\n\n### Timeframe 4 ({{ $json.indicators[3].interval }}) - [Long-term/Market Bias]\n** RSI:**\n- Value: {{ $json.indicators[3].rsi.value }}\n- Signal: {{ $json.indicators[3].rsi.signal }}\n\n** MACD:**\n- Line: {{ $json.indicators[3].macd.macd_line }}\n- Signal Line: {{ $json.indicators[3].macd.signal_line }}\n- Histogram: {{ $json.indicators[3].macd.histogram }}\n- Signal Type: {{ $json.indicators[3].macd.signal_type }}\n- Crossover: {{ $json.indicators[3].macd.crossover }}\n\n** EMA:**\n- EMA 50: {{ $json.indicators[3].ema.ema_50 }}\n- EMA 200: {{ $json.indicators[3].ema.ema_200 }}\n- Signal: {{ $json.indicators[3].ema.signal }}\n\n---\n\n### 5. OUTPUT FORMAT\n\nProvide your analysis in this structure:\n\nAnalyse for {{ $json.symbol }} at {{ $now.format('yyyy-MM-dd HH:mm')}}\n",
        "options": {
          "systemMessage": "=You are an expert cryptocurrency day trader with deep expertise in technical analysis, risk management, and multi-timeframe strategy using RSI, MACD and EMA indicators. Analyze the following data for {{ $json.symbol }} and provide actionable trading insights. There are tools available:\n1. Tool to get the news sentiment for {{ $json.symbol }} from the `News Sentiment` tool (Example: . \n2. Tool to get the current price in USDT (Example input ETGUSDT).\n3. Tool to get klines or candle-sticks with interval 1 minute. You can limit how much data that you will fetch.\n\n**ðŸ“Š MARKET STRUCTURE:** [Bullish/Bearish/Neutral/Mixed with confidence %]\n\n**ðŸŽ¯ TRADING RECOMMENDATION:** \n- Action: [WAIT / LONG / SHORT / CLOSE POSITION]\n- Entry Zone: [Price range or \"Wait for trigger\"]\n- Stop Loss: [Price or percentage]\n- Target 1 (2:1 R:R): [Price]\n- Target 2 (3:1 R:R): [Price]\n\n**ðŸ“ˆ SIGNAL BREAKDOWN:**\n- Confluence Score: [Strong/Moderate/Weak]\n- Key Bullish Factors: [List]\n- Key Bearish Factors: [List]\n- Primary Risk: [Main concern]\n\n**âš ï¸ RISK WARNING:**\n[Specific conditions that could invalidate the setup or increase risk]\n\n**ðŸ’¡ CONTEXT NOTES:**\n[Crypto-specific considerations: volatility, 24/7 market, news sensitivity, volume confirmation needs]\n\n---\n\n## IMPORTANT GUIDELINES\n\n1. **No Trade is Better Than a Bad Trade:** If signals conflict or confluence is weak, recommend WAITING\n2. **Timeframe Hierarchy:** Respect the trend of the higher timeframe; use lower timeframes only for entry timing\n3. **Crypto Volatility:** Account for 24/7 trading, sudden volatility spikes, and news-driven moves\n4. **Confirmation Required:** Never recommend a trade based on a single indicator; require at least 2-3 confirming factors\n5. **Dynamic Adaptation:** If RSI is extremely overbought (>75) or oversold (<25), prioritize mean reversion over trend following",
          "maxIterations": 4
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        1600,
        -224
      ],
      "id": "e6f1ee02-bec3-4e27-89bc-28a60e8a7446",
      "name": "Gemini Trader",
      "notesInFlow": false
    },
    {
      "parameters": {
        "options": {
          "temperature": 0.1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        1408,
        16
      ],
      "id": "eedb37af-827c-4b94-9f28-c5f918aedcc8",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "yQBvEEzQX2TcmaLh",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "toolDescription": "Given the list of articles about crypto coin like BTC, ETH, SOL, etc. The articles are with their sentiment with path `/api/news/sentiment/{coin}`.\n\nExample the path for **BTC** `/api/news/sentiment/BTC`",
        "url": "=http://api:8000/api/news/sentiment/{{ $formAI('coin')}}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.4,
      "position": [
        1920,
        16
      ],
      "id": "b6e26ade-6678-4072-8417-43306e41a4a5",
      "name": "News Sentiment"
    },
    {
      "parameters": {
        "apiSource": "direct",
        "marketType": "futures",
        "symbol": "={{ $json.symbol }}",
        "interval": "={{ $json.intervals[3] }}",
        "limit": "={{ $json.limit }}"
      },
      "type": "CUSTOM.binanceKline",
      "typeVersion": 1,
      "position": [
        64,
        -256
      ],
      "id": "2e9f194d-496a-4dff-9606-fa6b7d8a7edd",
      "name": "USDM-M 1m",
      "credentials": {
        "binanceApi": {
          "id": "tmVGRcPSpJIYsaeS",
          "name": "Binance account"
        }
      }
    },
    {
      "parameters": {
        "parameters": {
          "sma_enabled": false
        }
      },
      "type": "CUSTOM.binanceKlineIndicators",
      "typeVersion": 1,
      "position": [
        288,
        -256
      ],
      "id": "ae5e27b7-3528-44e9-97ca-57c51f6bee4f",
      "name": "Indicators 1m"
    },
    {
      "parameters": {
        "apiSource": "direct",
        "marketType": "futures",
        "symbol": "={{ $json.symbol }}",
        "interval": "={{ $json.intervals[0] }}",
        "limit": "={{ $json.limit }}"
      },
      "type": "CUSTOM.binanceKline",
      "typeVersion": 1,
      "position": [
        64,
        -64
      ],
      "id": "4138c273-5ff8-43b1-8714-4904bdb33e63",
      "name": "USDM-M 15m",
      "credentials": {
        "binanceApi": {
          "id": "tmVGRcPSpJIYsaeS",
          "name": "Binance account"
        }
      }
    },
    {
      "parameters": {
        "parameters": {
          "sma_enabled": false
        }
      },
      "type": "CUSTOM.binanceKlineIndicators",
      "typeVersion": 1,
      "position": [
        288,
        -64
      ],
      "id": "cc8c5efe-fd44-4cc3-a01e-abffbc711c35",
      "name": "Indicators 15m"
    },
    {
      "parameters": {
        "apiSource": "direct",
        "marketType": "futures",
        "symbol": "={{ $json.symbol }}",
        "interval": "={{ $json.intervals[1] }}",
        "limit": "={{ $json.limit }}"
      },
      "type": "CUSTOM.binanceKline",
      "typeVersion": 1,
      "position": [
        64,
        128
      ],
      "id": "cbda7482-10b9-40ab-a436-17e34d35119e",
      "name": "USDM-M 1h",
      "credentials": {
        "binanceApi": {
          "id": "tmVGRcPSpJIYsaeS",
          "name": "Binance account"
        }
      }
    },
    {
      "parameters": {
        "parameters": {
          "sma_enabled": false
        }
      },
      "type": "CUSTOM.binanceKlineIndicators",
      "typeVersion": 1,
      "position": [
        288,
        128
      ],
      "id": "f5d1db52-1054-4077-b3a4-d237add5355d",
      "name": "Indicators 1h"
    },
    {
      "parameters": {
        "apiSource": "direct",
        "marketType": "futures",
        "symbol": "={{ $json.symbol }}",
        "interval": "={{ $json.intervals[2] }}",
        "limit": "={{ $json.limit }}"
      },
      "type": "CUSTOM.binanceKline",
      "typeVersion": 1,
      "position": [
        64,
        320
      ],
      "id": "6b78ecdf-94a7-42cb-89a8-508eb5703305",
      "name": "USDM-M 4h",
      "credentials": {
        "binanceApi": {
          "id": "tmVGRcPSpJIYsaeS",
          "name": "Binance account"
        }
      }
    },
    {
      "parameters": {
        "parameters": {
          "sma_enabled": false
        }
      },
      "type": "CUSTOM.binanceKlineIndicators",
      "typeVersion": 1,
      "position": [
        288,
        320
      ],
      "id": "3dfe536a-b5f1-407b-9a2e-f9063b0002cd",
      "name": "Indicators 4h"
    },
    {
      "parameters": {
        "jsCode": "const indicators = $input.first().json.indicators\n  .map((indicator) => {\n    return {\n      interval: indicator.interval,\n      rsi: indicator.rsi,\n      macd: indicator.macd,\n      ema: indicator.ema,\n      recommendation: indicator.recommendation,\n    }\n  });\n\nreturn [{\n  chatId: $('Translate to Symbol').first().json.chatId,\n  coin: $('Translate to Symbol').first().json.coin,\n  symbol: $input.first().json.indicators[0].symbol,\n  current_price: $input.first().json.indicators[0].current_price,\n  indicators\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1184,
        -80
      ],
      "id": "6949fac0-0807-4eb0-95bb-0afc24b244bf",
      "name": "Grouping"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $json.symbol }}-{{ $now.format('yyyyMMddHHmm') }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        1536,
        16
      ],
      "id": "81aced67-2d92-43ef-821b-c7b785d745f7",
      "name": "Postgres Chat Memory",
      "credentials": {
        "postgres": {
          "id": "hXqxifwqyo0KaoX1",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "5572228344",
        "text": "=AI Agent begin to evaluate the data of {{ $json.symbol }} symbol with {{ $json.indicators.map((item) => item.interval).join(', ') }} intervals.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1664,
        -416
      ],
      "id": "81d16e5e-23b5-465d-99d0-1f40c69782ef",
      "name": "Notify AI Agent",
      "webhookId": "058cd607-dd62-4cb4-80c4-7fd0459ac9a9",
      "notesInFlow": true,
      "credentials": {
        "telegramApi": {
          "id": "O5JL1UG87JJ1GySx",
          "name": "stix_crypto_freak_bot"
        }
      },
      "onError": "continueErrorOutput",
      "notes": "Some error "
    },
    {
      "parameters": {
        "operation": "select",
        "schema": {
          "__rl": true,
          "value": "public",
          "mode": "list",
          "cachedResultName": "public"
        },
        "table": {
          "__rl": true,
          "value": "n8n_chat_histories",
          "mode": "list",
          "cachedResultName": "n8n_chat_histories"
        },
        "returnAll": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Return_All', ``, 'boolean') }}",
        "where": {
          "values": [
            {
              "column": "session_id",
              "condition": "LIKE",
              "value": "={{ $json.symbol }}%"
            }
          ]
        },
        "sort": {
          "values": [
            {
              "column": "id",
              "direction": "DESC"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.postgresTool",
      "typeVersion": 2.6,
      "position": [
        1664,
        512
      ],
      "id": "2d7d2115-f3d0-4fe6-82b8-e06315bfc61c",
      "name": "Select rows from a table in Postgres",
      "credentials": {
        "postgres": {
          "id": "hXqxifwqyo0KaoX1",
          "name": "Postgres account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Markdown Binary": {
      "main": [
        [
          {
            "node": "Send a document",
            "type": "main",
            "index": 0
          },
          {
            "node": "Write to docs/analyse",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "Translate to Symbol",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Translate to Symbol": {
      "main": [
        [
          {
            "node": "USDM-M 1m",
            "type": "main",
            "index": 0
          },
          {
            "node": "USDM-M 15m",
            "type": "main",
            "index": 0
          },
          {
            "node": "USDM-M 1h",
            "type": "main",
            "index": 0
          },
          {
            "node": "USDM-M 4h",
            "type": "main",
            "index": 0
          },
          {
            "node": "Notify Analysis Start",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge Indicators": {
      "main": [
        [
          {
            "node": "Sort by Interval",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "My Telegram Channel": {
      "main": [
        [
          {
            "node": "Translate to Symbol",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Message a model": {
      "main": [
        [
          {
            "node": "Markdown Binary",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Klines Tool": {
      "ai_tool": [
        [
          {
            "node": "Gemini Trader",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Current Price": {
      "ai_tool": [
        [
          {
            "node": "Gemini Trader",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Sort by Interval": {
      "main": [
        [
          {
            "node": "Aggregate",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate": {
      "main": [
        [
          {
            "node": "Grouping",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Gemini Trader",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Gemini Trader": {
      "main": [
        [
          {
            "node": "Markdown Binary",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "News Sentiment": {
      "ai_tool": [
        [
          {
            "node": "Gemini Trader",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "USDM-M 1m": {
      "main": [
        [
          {
            "node": "Indicators 1m",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Indicators 1m": {
      "main": [
        [
          {
            "node": "Merge Indicators",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "USDM-M 15m": {
      "main": [
        [
          {
            "node": "Indicators 15m",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Indicators 15m": {
      "main": [
        [
          {
            "node": "Merge Indicators",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "USDM-M 1h": {
      "main": [
        [
          {
            "node": "Indicators 1h",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Indicators 1h": {
      "main": [
        [
          {
            "node": "Merge Indicators",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "USDM-M 4h": {
      "main": [
        [
          {
            "node": "Indicators 4h",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Indicators 4h": {
      "main": [
        [
          {
            "node": "Merge Indicators",
            "type": "main",
            "index": 3
          }
        ]
      ]
    },
    "Grouping": {
      "main": [
        [
          {
            "node": "Gemini Trader",
            "type": "main",
            "index": 0
          },
          {
            "node": "Notify AI Agent",
            "type": "main",
            "index": 0
          },
          {
            "node": "Message a model",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "Gemini Trader",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Select rows from a table in Postgres": {
      "ai_tool": [
        [
          {
            "node": "Message a model",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "binaryMode": "separate",
    "availableInMCP": false,
    "timeSavedMode": "fixed",
    "timezone": "Etc/UTC",
    "callerPolicy": "workflowsFromSameOwner"
  },
  "versionId": "4c5a3d65-be50-49a3-847a-65c849af586e",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "c5132ea42f91439834dd110c2ce2f5a137182faaae992ba119ae691d81f22581"
  },
  "id": "U9TjbJahvt3E4XQn",
  "tags": []
}